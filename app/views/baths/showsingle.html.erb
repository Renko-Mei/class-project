<script src="//maps.google.com/maps/api/js?v=3.23&key=AIzaSyD4MhM4eZ3aFFZMEZr34-YyswW6MjvqU6E"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<table class="table">
                        <tr>
                            <th><b>Location</b></th>
                            <td><b><%= @bath.city %>, <%= @bath.address %></b></td>
                        </tr>
                        
                        <tr>
                            <th><b>Average Rating</b></th>
                            <td><span class = "star-rating" data-score=<%= @avg_rating %></span></td>
                        </tr>
                        
                        <tr>
                            <th><b>Images</b></th>
                            <td><%= image_tag @bath.image.url(:thumb) %></td>
                        </tr>

                            <div class="row">
        <div class="col-md-6 col md-offset-3">
            
                        
      </table>
      </div>
      </div>
      
      
      <center>
      <div style='width: 100%;'>
  <div id="map" style='width: 70%; height: 500px;'></div>
</div>
</center>
<h1>Reviews</h1>

                    <% @bath.reviews.each do |review| %>
                
                <table class="table">
                        <tr>
                            <th><b><%= User.find_by_id(review.user_id).name %> </b> </th>
                            <td><%= review.post %></td>
                        </tr>
                        <tr>
                            <th><b>User Rating</b></th>
                            <td><span class = "star-rating" data-score=<%= review.rating %></span></td>
                        </tr>
                        
                        
                        
                </table>
                
            <% end %>
        <b><%= link_to "Leave A Review", new_bath_review_path(@bath) %> </b>

<script type="text/javascript">

  myLatLng = new google.maps.LatLng({lat: <%= @bath.latitude %>, lng: <%= @bath.longitude %>}); 

handler = Gmaps.build('Google');
handler.buildMap({ provider: {zoom: 16, center: myLatLng}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers([
      {
          "lat": <%= @bath.latitude %>,
          "lng": <%= @bath.longitude %>,
          "picture": {
                    "url": "http://megaicons.net/static/img/icons_sizes/105/244/32/toilet-paper-icon.png",
                     "width":  32,
                     "height": 32
              
          },
          "infowindow": "hello!"
      }
      ]);
  

  
  handler.bounds.extendWith(markers);
  //handler.fitMapToBounds();
});

</script>
      
     