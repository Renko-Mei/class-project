<script src="//maps.google.com/maps/api/js?v=3.23&key=AIzaSyD4MhM4eZ3aFFZMEZr34-YyswW6MjvqU6E"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<style>
.clear { clear:both; }


</style>

<!-- THIS IS THE BREAK POINT  -->

<table class="table" style="width:80%; float:left; margin-right: 5%;">
                        <tr>
                            <th><b>Location</b></th>
                            <td><b><%= @bath.city %>, <%= @bath.address %></b></td>
                        </tr>

                        <tr>
                            <th><b>Average Rating</b></th>
                            <% if @bath.reviews.count != 0 %>
                                <td><span class = "star-rating" data-score=<%= @avg_rating %></span></td>
                            <% else %>
                                <td>No reviews yet</td>
                            <% end %>

                        </tr>

                        <tr>
                            <th><b>Images</b></th>
                            <td><%= image_tag @bath.image.url(:thumb) %></td>
                        </tr>
  </table>


  <img src="images/image1.png" alt="FirstImage"
  style="max-width:100%; height: 137px; float:left;" </img>






<!--      <center> -->
      <div style='width: 100%; height:500px; float:left;'>
  <div id="map" style='width: 80%; height: 100%; float: left; margin-right: 5%;'></div>

    <table  style='width:15%; float:left; height: 125px; font-size: 14px; margin: 0 0 5% 0'>
      <tr>
            <th><b>Mon</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>
      <tr>
            <th><b>Tue</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>
      <tr>
            <th><b>Wed</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>
      <tr>
            <th><b>Thu</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>
      <tr>
            <th><b>Fri</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>
      <tr>
            <th><b>Sat</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>
      <tr>
            <th><b>Sun</b></th>
            <td> 9:00am - 10:00pm </td>
      </tr>


</table>

<p style='float:left;'>
  Delivery No </br>
  Take-out Yes </br>
  --- </br>
  Or description </br>
  --- </br>
  Or hours </br>
  if hours, </br>
  expand or </br>
  same size
</p>



</div>

<div class="clear"></div>
<!-- </center> -->
<h2>Reviews</h2>

                    <% @bath.reviews.each do |review| %>

                <table class="table" style='width: 80%;'>

                  <tr>
                      <th><b><%= User.find_by_id(review.user_id).name %> </b> </th>
                      <td><span class = "star-rating" data-score=<%= review.rating %></span></td>
                  </tr>

                  <tr>
                      <td><%= image_tag current_user.image.url(:mini) %></td>
                      <td style="width:750px"><%= review.post %></td>
                  </tr>

                </table>

            <% end %>
        <b><%= link_to "Leave A Review", new_bath_review_path(@bath) %> </b>

<script type="text/javascript">

  myLatLng = new google.maps.LatLng({lat: <%= @bath.latitude %>, lng: <%= @bath.longitude %>});

handler = Gmaps.build('Google');
handler.buildMap({ provider: {zoom: 16, center: myLatLng}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers([
      {
          "lat": <%= @bath.latitude %>,
          "lng": <%= @bath.longitude %>,
          "picture": {
                    "url": "http://megaicons.net/static/img/icons_sizes/105/244/32/toilet-paper-icon.png",
                     "width":  32,
                     "height": 32

          },
          "infowindow": "hello!"
      }
      ]);



  handler.bounds.extendWith(markers);
  //handler.fitMapToBounds();
});

</script>
